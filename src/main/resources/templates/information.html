<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="partials/head :: head" />

<body class="information-body">

<nav th:replace="partials/navbar :: navbar" />

<div class="modal fade editModal" tabindex="-1" role="dialog" aria-labelledby="editModal" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit entry</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <form th:action="@{'/edit'}" th:method="post" th:object="${entry}">
                    <div class="form-group">
                        <input th:field="*{id}" id="editId" class="form-control" name="edit" type="hidden">
                    </div>
                    <div class="form-group">
                        <label for="editDate">Date</label>
                        <input th:field="*{date}" id="editDate" class="form-control" type="date">
                    </div>
                    <h6>Select Location</h6>
                    <select th:field="*{location}" id = "editLocation" class="form-control location-select">
                        <option th:each="location : ${locations}" th:value="${location.getId()}" th:text="${location.getCountry()}"></option>
                    </select>
                    <div class="form-group">
                        <label for="editTotalCases">Total Cases</label>
                        <input th:value="*{totalCases}" type="number" class="form-control" id="editTotalCases" name="editTotalCases" onkeypress="return event.charCode > 47 && event.charCode < 58;" pattern="[0-9]{5}">
                    </div>
                    <div class="form-group">
                        <label for="editNewCases">New Cases</label>
                        <input th:value="*{newCases}" type="number" class="form-control" id="editNewCases" name="editNewCases" onkeypress="return event.charCode > 47 && event.charCode < 58;" pattern="[0-9]{5}">
                    </div>
                    <div class="form-group">
                        <label for="editTotalDeaths">Total Deaths</label>
                        <input th:value="*{totalDeaths}" type="number" class="form-control" id="editTotalDeaths" name="editTotalDeaths" onkeypress="return event.charCode > 47 && event.charCode < 58;" pattern="[0-9]{5}">
                    </div>
                    <div class="form-group">
                        <label for="editNewDeaths">New Deaths</label>
                        <input th:value="*{newDeaths}" type="number" class="form-control" id="editNewDeaths" name="editNewDeaths" onkeypress="return event.charCode > 47 && event.charCode < 58;" pattern="[0-9]{5}">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<h1 class="col page-title text-center" th:text="${disease.getName()}"></h1>
<input type="hidden" id="entryAttr" name="entryAttr" th:value="${all}">

<div class="row">
    <div class="col-4 p-5">
    <img class="information-disease-img w-100 portrait zoom" src="img/corona-virus.jpg">
    </div>
    <div class="col-7" style="margin-right: 1em">
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Statistics</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Disease Information</a>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                <table class="table table-hover">
                    <thead th:switch="${isMalaria}">
                        <tr th:case="${true}">
                            <th scope="col">Date</th>
                            <th scope="col">Location</th>
                            <th scope="col">Total Cases</th>
                            <th scope="col">Total Deaths</th>
                        </tr>
                        <tr th:case="${false}">
                            <th scope="col">Date</th>
                            <th scope="col">Location</th>
                            <th scope="col">New Cases</th>
                            <th scope="col">Total Cases</th>
                            <th scope="col">New Deaths</th>
                            <th scope="col">Total Deaths</th>
                        </tr>
                    </thead>

                    <tbody th:switch="${isMalaria}">
                        <span th:case="${true}">
                            <tr th:each="entry : ${entries}">
                                <td th:text="${entry.getDate()}"></td>
                                <td th:text="${entry.location.getCountry()}"></td>
                                <td th:text="${entry.getTotalCases()}"></td>
                                <td th:text="${entry.getTotalDeaths()}"></td>
                                <td><button type="button" class="btn btn-warning editButton" data-toggle="modal" data-target=".editModal" th:id="${entry.getId()}">
                                    Edit
                                </button></td>

                                <td><button type="button" class="btn btn-danger deleteButton" data-toggle="modal" data-target=".deleteModal" th:id="${entry.getId()}">
                                    Delete
                                </button></td>
                            </tr>
                        </span>
                        <span th:case="${false}">
                            <tr th:each="entry : ${entries}">
                                <td th:text="${entry.getDate()}" th:value="${entry.getDate()}"></td>
                                <td th:text="${entry.location.getCountry()}"></td>
                                <td th:text="${entry.getNewCases()}" ></td>
                                <td th:text="${entry.getTotalCases()}" ></td>
                                <td th:text="${entry.getNewDeaths()}" ></td>
                                <td th:text="${entry.getTotalDeaths()}" ></td>
                                <td><button type="button" class="btn btn-warning editButton" data-toggle="modal" data-target=".editModal" th:attr="data-date = ${entry.getDate()}, data-location = ${entry.location.getId()}, data-newcases = ${entry.newCases}, data-totalcases = ${entry.totalCases}, data-newdeaths = ${entry.newDeaths}, data-totaldeaths = ${entry.totalDeaths}" th:id="${entry.getId()}">
                                    Edit
                                </button></td>

                                <td><button type="button" class="btn btn-danger deleteButton" data-toggle="modal" data-target=".deleteModal" th:id="${entry.getId()}">
                                    Delete
                                </button></td>
                            </tr>
                        </span>
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                <div class="accordion" id="diseaseInfo">
                    <div class="card">
                        <div class="card-header" id="headOne">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#description" aria-expanded="true" aria-controls="description">
                                    What is this disease?
                                </button>
                            </h2>
                        </div>
                        <div id="description" class="collapse show" aria-labelledby="headOne" data-parent="#diseaseInfo">
                            <div class="card-body" th:text="${disease.getDescription()}">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headTwo">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#symptoms" aria-expanded="true" aria-controls="symptoms">
                                    What are the symptoms?
                                </button>
                            </h2>
                        </div>
                        <div id="symptoms" class="collapse" aria-labelledby="headTwo" data-parent="#diseaseInfo">
                            <div class="card-body" th:text="${disease.getSymptoms()}">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headThree">
                            <h2 class="mb-0">
                                <button id="modalDiseaseField" class="btn btn-link" type="button" data-toggle="collapse" data-target="#transmissions" aria-expanded="true" aria-controls="transmissions">
                                    How can this disease be transmitted?
                                </button>
                            </h2>
                        </div>
                        <div id="transmissions" class="collapse" aria-labelledby="headThree" data-parent="#diseaseInfo">
                            <div class="card-body" th:text="${disease.getTransmission()}">
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headFour">
                            <h2 class="mb-0">
                                <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#treatments" aria-expanded="true" aria-controls="treatments">
                                    How can this disease be treated?
                                </button>
                            </h2>
                        </div>
                        <div id="treatments" class="collapse" aria-labelledby="headFour" data-parent="#diseaseInfo">
                            <div class="card-body" th:text="${disease.getTreatments()}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<h1 class="col page-title text-center">NEWS ALERTS</h1>
<h2 class="col page-title text-center">World Health Organization</h2>

<div class="col p-5">
    <iframe name="Framename" src="https://www.who.int/news-room/detail/12-02-2020-world-experts-and-funders-set-priorities-for-covid-19-research" frameborder="0" scrolling="auto" class="frame-area">
    </iframe>
</div>

<h2 class="col page-title text-center">Center for Disease Control and Prevention</h2>

<div class="col p-5">
    <iframe name="Framename-two" src="https://www.cdc.gov/coronavirus/2019-ncov/index.html" frameborder="0" scrolling="auto" class="frame-area">
    </iframe>
</div>



<nav th:replace="partials/footer :: footer" />

<nav th:replace="partials/scripts :: scripts" />
<script>

    function GetEntries() {
        debugger;
        $.ajax({
            type: "GET",
            url: "Entry/",
            data: { userId: Id },
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (result) {
                debugger;
                alert(result)
            },
            error: function (response) {
                debugger;
                alert('eror');
            }
        });

    }

    $('.editModal').on('show.bs.modal', function(event) {
        let button = $(event.relatedTarget);
        let number = button.attr('id');
        $("#editDate").val(button.data('date'));
        $("#editLocation").val(button.data('location'));
        $("#editNewCases").val(button.data('newcases'));
        $("#editTotalCases").val(button.data('totalcases'));
        $("#editNewDeaths").val(button.data('newdeaths'));
        $("#editTotalDeaths").val(button.data('totaldeaths'));
        console.log(number);
        console.log(button.data('date'));
        console.log(button.data('location'));
        console.log(button.data('newcases'));
        console.log(button.data('totalcases'));
        console.log(button.data('newdeaths'));
        console.log(button.data('totaldeaths'));

    })
</script>
</body>


</html>
